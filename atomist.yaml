#
#  Copyright Â© 2020 Atomist, Inc.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
#

skill:
  name: atomist/npm-license-usage-skill
  title: NPM License Usage
  version: 0.1.0
  author: Atomist
  description: Maintain a third-party OSS license usage file
  category:
    - DEPENDENCIES
    - CODE_QUALITY
    - PRODUCTIVITY
  technology:
  license: Apache-2.0
  homepage: https://github.com/atomist-seeds/npm-license-skill
  repository: https://github.com/atomist-seeds/npm-license-skill.git
  icon: file://docs/images/icon.svg

  package:
    use: atomist/package-npm-skill
    parameters:
      bundle: true
      sourceMaps: false
      minify: true

  runtime:
    memory: 2048
    timeout: 540
    name: nodejs10
    entry_point: entryPoint

resource_providers:
  - name: github
    description: GitHub
    type_name: GitHubAppResourceProvider
    min_required: 1
    max_allowed: 1
  - name: slack
    description: Slack
    type_name: SlackResourceProvider
    min_required: 0
    max_allowed: 1

parameters:
  - string:
      name: contact
      display_name: OSS contact email
      description: Email address to contact in case of questions regarding license usage. This gets written to the
        license usage file.
      required: true
  - string:
      name: file
      display_name: Name of license file
      description: Name of the license usage file within the repository
      required: false
      place_holder: legal/THIRD_PARTY.md
  - string:
      name: footer
      display_name: Footer of license file
      description: Additional footer in Markdown that goes at the end of the license usage file
      required: false
      line_style: multiple
  - single_choice:
      name: push
      display_name: Update license information
      description: Control how and when license usage information should be pushed into the repository
      options:
        - text: Commit to default branch only
          value: commit_default
        - text: Commit to any branch
          value: commit
        - text: Raise Pull Request for default branch only
          value: pr_default
        - text: Raise Pull Request for any branch
          value: pr
      required: true
  - repo_filter:
      name: repos
      display_name: Which repositories
      description: ''
      required: false
